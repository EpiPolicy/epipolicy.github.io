(this["webpackJsonpepipolicy-docs"]=this["webpackJsonpepipolicy-docs"]||[]).push([[0],{135:function(e){e.exports=JSON.parse('[{"name":"Introduction","children":[{"name":"Overview","url":"overview","markdown-file":"overview.md"},{"name":"State Data","url":"state-data","markdown-file":"state_data.md"},{"name":"Regex Syntax","url":"regex-syntax","markdown-file":"regex_syntax.md"}]},{"name":"Interface","children":[{"name":"Intervention","url":"intervention","markdown-file":"intervention_overview.md"},{"name":"Facilities","url":"facilities","markdown-file":"facilities.md"},{"name":"Schedule","url":"schedule","markdown-file":"schedule.md"},{"name":"Initialize","url":"initialize","markdown-file":"intialize_simulation.md"},{"name":"Results","url":"results","markdown-file":"results.md"},{"name":"Compare","url":"compare","markdown-file":"compare.md"}]},{"name":"Decision","url":"decision","protected":true,"markdown-file":"decision.md"},{"name":"Private Doc","url":"privatedoc","protected":true,"markdown-file":"privatedoc.pmd"},{"name":"HTML Page","url":"htmlpage","html-file":"htmlpage.html"}]')},141:function(e,t,n){},142:function(e,t,n){},144:function(e,t,n){},166:function(e,t){},168:function(e,t){},178:function(e,t){},180:function(e,t){},207:function(e,t){},208:function(e,t){},213:function(e,t){},215:function(e,t){},222:function(e,t){},241:function(e,t){},280:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(46),c=n.n(o),l=n(16),r=n(17),s=n(32),d=n(31),u=n(30),h=(n(141),n(142),n(5)),g=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).model=e.model,i.state={loginBox:!1},i}return Object(r.a)(n,[{key:"renderLoginBox",value:function(){var e=this;return this.model.loginInfo?Object(h.jsx)("div",{className:"login-box",onClick:function(){return e.model.logOut()},children:"Sign out"}):this.state.loginBox?Object(h.jsxs)("div",{className:"login-box",children:[this.state.loginError?Object(h.jsx)("div",{className:"login-error",children:this.state.loginError}):null,Object(h.jsx)("input",{autoFocus:!0,type:"password",onKeyDown:function(t){e.setState({loginError:null}),"Enter"===t.key?e.checkLoginPassword(t.target.value):"Escape"===t.key&&e.setState({loginBox:!1})}})]}):Object(h.jsx)("div",{className:"login-box",onClick:function(){return e.setState({loginBox:!0})},children:"Sign in"})}},{key:"checkLoginPassword",value:function(e){var t=this;this.model.logIn(e).catch((function(e){t.setState({loginError:e})}))}},{key:"renderMenuItem",value:function(e){var t=this;window.location.hash.slice(1);return e.children?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"menu-parent-item",children:e.name}),Object(h.jsx)("div",{className:"menu-children",children:e.children.map((function(e){return t.renderMenuItem(e)}))})]}):!this.model.loginInfo&&e.protected?null:Object(h.jsx)("div",{className:"menu-item"+(e.active?" active":""),onClick:function(){return t.goTo(e)},children:e.name},e.url)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{id:"sidebar",children:[Object(h.jsx)("h1",{onClick:function(){return window.MathJax.typeset()},children:"EpiPolicy"}),Object(h.jsx)("div",{className:"menu",children:this.model.pages.map((function(t){return e.renderMenuItem(t)}))}),this.renderLoginBox()]})}},{key:"goTo",value:function(e){document.title=e.name,window.history.pushState({url:"#"+e.url},e.name,"#"+e.url),this.model.checkPagesActivation()}}]),n}(a.a.Component),v=Object(u.a)(g),m=(n(144),n(38)),f=n.n(m),p=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).model=e.model,i}return Object(r.a)(n,[{key:"render",value:function(){return this.model.activePage?Object(h.jsxs)("div",{id:"page-display",children:[Object(h.jsx)("h2",{children:this.model.activePage.name}),Object(h.jsx)("div",{id:"page-content",dangerouslySetInnerHTML:{__html:this.model.activePageContent}})]}):null}},{key:"componendDidMount",value:function(){setTimeout((function(){window.MathJax.typeset()}),100)}},{key:"componentDidUpdate",value:function(){setTimeout((function(){window.MathJax.typeset()}),100)}}]),n}(a.a.Component),j=Object(u.a)(p),x=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{id:"app",children:Object(h.jsx)("div",{className:"container-fluid no-gutters",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{id:"sidebar-container",className:"col-2",children:Object(h.jsx)(v,{model:this.props.model})}),Object(h.jsx)("div",{id:"main-panel-container",className:"col-10",children:Object(h.jsx)(j,{model:this.props.model})})]})})})}}]),n}(a.a.Component),b=Object(u.a)(x),k=n(72),O=n(2),y=n(135),P=n(136),w=n.n(P),I=n(39),C=n.n(I),S=new(function(){function e(){var t=this;Object(l.a)(this,e),this.pages=y,this.activePageContent=null,this.loginInfo=null,Object(O.n)(this,{pages:O.o,checkPagesActivation:O.f,loginInfo:O.o,logIn:O.f,logOut:O.f,activePageContent:O.o,activePage:O.g}),this.checkPagesActivation(),window.onpopstate=function(e){t.checkPagesActivation()}}return Object(r.a)(e,[{key:"checkPagesActivation",value:function(){var e=window.location.hash.slice(1),t=function(e){var t,i=Object(k.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n(a)}}catch(o){i.e(o)}finally{i.f()}},n=function(n){n.children&&t(n.children),n.active=e===n.url};t(this.pages),this.loadActivePage()}},{key:"latexReplace",value:function(e){return e=(e=(e=e.replace(/<latex>(.*?)<\/latex>/g,(function(e,t){return'<div class="latex">$'+t+"$</div>"}))).replace(/<latex-line>(.*?)<\/latex-line>/g,(function(e,t){return'<div class="latex latex-line>$$'+t+"$$</div>"}))).replace(/<latex-line-left>(.*?)<\/latex-line-left>/g,(function(e,t){return'<div class="latex latex-line latex-line-left">$$'+t+"$$</div>"}))}},{key:"generateErrorPage",value:function(e){return'<div className="error">'+e+"</div>"}},{key:"loadMarkdownFilePage",value:function(){var e=this,t=this.activePage.protected?"private-pages/":"pages/";f.a.get(t+this.activePage["markdown-file"]).then((function(t){var n=t.data;if(e.activePage.protected)if(e.loginInfo)try{n=C.a.AES.decrypt(t.data,e.loginInfo.password).toString(C.a.enc.Utf8),console.log(n)}catch(i){e.activePageContent=e.generateErrorPage(i)}else e.activePageContent=e.generateErrorPage("Login needed in order to decrypt this file");e.activePageContent=e.latexReplace(w()(n))})).catch((function(t){e.activePageContent=e.generateErrorPage(t)}))}},{key:"loadHTMLFilePage",value:function(){var e=this;f.a.get("html-pages/"+this.activePage["html-file"]).then((function(t){e.activePageContent=t.data})).catch((function(t){e.activePageContent=t}))}},{key:"loadActivePage",value:function(){console.log("loadActivePage",this.activePage),this.activePage&&(this.activePage["markdown-file"]?this.loadMarkdownFilePage():this.activePage["html-file"]&&this.loadHTMLFilePage())}},{key:"activePage",get:function(){var e=function(e){var n,i=Object(k.a)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t(a);if(o)return o}}catch(c){i.e(c)}finally{i.f()}},t=function(t){return console.log("checking... ",t.name),t.children?e(t.children):t.active?t:void 0},n=e(this.pages);return console.log("activePage",n),n}},{key:"logIn",value:function(e){var t=this;return new Promise((function(n,i){f.a.get("private-pages/main.pmd").then((function(a){try{var o=C.a.AES.decrypt(a.data,e).toString(C.a.enc.Utf8);console.log("login check. decrypted:\n"+o),t.loginInfo="salimmo s\xf9, el primo e io secondo,\ntanto ch\u2019i\u2019 vidi de le cose belle\nche porta \u2019l ciel, per un pertugio tondo.\nE quindi uscimmo a riveder le stelle."===o?{password:e}:null,n()}catch(c){i("Login failed")}}))}))}},{key:"logOut",value:function(){this.loginInfo=null}}]),e}()),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),o(e),c(e)}))};document.model=S,document.toJS=O.q,c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(b,{model:S})}),document.getElementById("root")),E()}},[[280,1,2]]]);
//# sourceMappingURL=main.90bc9f05.chunk.js.map